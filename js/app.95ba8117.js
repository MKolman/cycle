(function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],u=0,v=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&v.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(v.length)v.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function i(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"30a28f3a"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}a[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"21f5":function(e,t,n){},"98f8":function(e,t,n){"use strict";n("21f5")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:"",clipped:"",overflow:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{link:"",to:"/"}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-home")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Home")])],1)],1),null!==e.installPrompt?n("v-list-item",{on:{click:function(t){return e.installPrompt.prompt()}}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-cloud-download")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Install")])],1)],1):e._e(),n("v-list-item",{attrs:{link:"",to:"/about"}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-information")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("About")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:e.deleteDatabase}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-delete")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Reset")])],1)],1)],1)],1),n("v-app-bar",{attrs:{app:"",dark:"",color:"accent","clipped-left":""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Cycle")])],1),n("v-content",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)},o=[],i=n("1da1"),s=(n("96cf"),n("d3b7"),n("4d90"),n("25f0"),"cycle"),c=1,l={deleteDb:function(){indexedDB.deleteDatabase(s)},getDb:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=window.indexedDB.open(s,c);n.onerror=function(e){t(Error("Error opening db"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1){var n=t.createObjectStore("eventDays",{autoIncrement:!0,keyPath:"id"});n.createIndex("by_profile","profile",{unique:!1}),n.createIndex("by_startDay","startDay",{unique:!1}),n.createIndex("by_endDay","endDay",{unique:!1}),n.createIndex("by_day","day",{unique:!1}),n.createIndex("by_profile_startDay",["profile","startDay"],{unique:!1}),n.createIndex("by_profile_endDay",["profile","endDay"],{unique:!1}),n.createIndex("by_profile_day",["profile","day"],{unique:!1}),n.createIndex("by_profile_startDay_endDay",["profile","startDay","endDay"],{unique:!1})}}})));case 1:case"end":return e.stop()}}),e)})))()},getEvents:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=e.transaction(["eventDays"],"readonly");r.oncomplete=function(e){t(o)};var a=r.objectStore("eventDays"),o=[];a.openCursor().onsuccess=function(e){var t=e.target.result;t&&(o.push(t.value),t.continue())}})));case 1:case"end":return t.stop()}}),t)})))()},addEvent:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){var a=e.transaction(["eventDays"],"readwrite");a.oncomplete=function(e){n()};for(var o=new Date(t.startDay),i=new Date(t.endDay),s=a.objectStore("eventDays"),c=o;c<=i;c.setDate(c.getDate()+1))s.add({profile:t.profile,startDay:t.startDay,endDay:t.endDay,day:c.getFullYear().toString().padStart(4,"0")+"-"+(c.getMonth()+1).toString().padStart(2,"0")+"-"+c.getDate().toString().padStart(2,"0")})})));case 1:case"end":return n.stop()}}),n)})))()},deleteEvent:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){var a=e.transaction(["eventDays"],"readwrite");a.oncomplete=function(e){n()};var o=a.objectStore("eventDays");o.index("by_profile_startDay_endDay").openKeyCursor(IDBKeyRange.only([t.profile,t.startDay,t.endDay])).onsuccess=function(e){var t=e.target.result;t&&(o.delete(t.primaryKey),t.continue())}})));case 1:case"end":return n.stop()}}),n)})))()}},u=l,d={props:{source:String},data:function(){return{installPrompt:null,drawer:null}},mounted:function(){var e=this;window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e.installPrompt=t}))},methods:{deleteDatabase:function(){confirm("Are you sure you want to delete everything?\nThis cannot be undone.")&&(u.deleteDb(),document.location.reload())}}},v=d,f=n("2877"),p=n("6544"),h=n.n(p),m=n("7496"),g=n("40dc"),D=n("5bc1"),y=n("a523"),b=n("a75b"),w=n("132d"),E=n("8860"),_=n("da13"),x=n("1800"),k=n("5d23"),j=n("f774"),C=n("2a7f"),S=Object(f["a"])(v,a,o,!1,null,null,null),V=S.exports;h()(S,{VApp:m["a"],VAppBar:g["a"],VAppBarNavIcon:D["a"],VContainer:y["a"],VContent:b["a"],VIcon:w["a"],VList:E["a"],VListItem:_["a"],VListItemAction:x["a"],VListItemContent:k["a"],VListItemTitle:k["b"],VNavigationDrawer:j["a"],VToolbarTitle:C["a"]});var O=n("9483");Object(O["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("3ca3"),n("ddb0");var T=n("8c4f"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("h1",[e._v(" "+e._s(e.currentMonthName)+" "),n("span",{staticClass:"navigation"},[n("v-btn",{attrs:{fab:"",text:"",large:""},on:{click:e.prev}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-left")])],1),n("v-btn",{attrs:{fab:"",text:"",large:""},on:{click:e.next}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-right")])],1)],1)]),n("v-calendar",{ref:"calendar",staticClass:"elevation-2",attrs:{type:"month",weekdays:[1,2,3,4,5,6,0],events:e.allEvents,"event-color":e.getEventColor},on:{"click:event":e.handleEvent,"click:date":e.handleDate,"click:day":e.handleDay},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}}),n("v-dialog",{attrs:{width:"500"},model:{value:e.showDeleteDialog,callback:function(t){e.showDeleteDialog=t},expression:"showDeleteDialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5 grey lighten-2",attrs:{"primary-title":""}},[e._v(" Delete event ")]),n("v-card-text",[e._v(" Do you want to delete event ranging from "+e._s(e.eventToDelete?e.eventToDelete.startDate.toLocaleDateString():"past")+" to "+e._s(e.eventToDelete?e.eventToDelete.endDate.toLocaleDateString():"future")+"? ")]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showDeleteDialog=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.deleteEvent}},[e._v(" Delete ")])],1)],1)],1)],1)},P=[];n("99af"),n("159b"),n("07ac"),n("4e82");function A(e,t){while(e.length<=1)e.push(t);return e}var L=function(e){return Math.round(e.reduce((function(e,t){return e+t}),0)/e.length)},q=function(e){return e.toISOString().substr(0,10)};function M(e,t){var n=new Date(e).valueOf()-new Date(t).valueOf();return Math.round(n/864e5)}function R(e){if(0===e.length)return null;e.sort((function(e,t){return e.start>t.start?1:e.start===t.start?0:-1}));for(var t={len:[],beg:[],end:[]},n=0;n<e.length;n++){var r=e[n];t.len.push(M(r.end,r.start)),0!==n&&(t.beg.push(M(r.start,e[n-1].start)),t.end.push(M(r.end,e[n-1].end)))}t.len=A(t.len,5),t.beg=A(t.beg,29),t.end=A(t.end,29);var a=e[e.length-1],o=new Date(a.start),i=new Date(a.end);return o.setDate(o.getDate()+L(t.beg)),i.setDate(i.getDate()+L(t.end)),{start:q(o),end:q(i),name:"predict"}}var N=R;function B(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}var $={name:"Home",data:function(){return{creatingEvent:!1,currentDate:B(new Date),profile:"default",eventToDelete:null,db:null,newEvent:{name:"New Event",color:"primary"},events:[]}},computed:{showDeleteDialog:{get:function(){return null!==this.eventToDelete},set:function(e){!1===e&&(this.eventToDelete=null)}},allEvents:function(){var e=[],t=N(this.events);return t&&(t.color="secondary",e.push(t)),this.creatingEvent&&e.push(this.newEvent),e.concat(this.events)},defaultColor:function(){return["primary","secondary"][+this.creatingEvent]},currentMonthName:function(){var e=new Date(this.currentDate);return e.toLocaleString("default",{month:"long",year:"numeric"})}},created:function(){var e=this;u.getDb().then((function(t){e.db=t,e.loadEvents()}))},methods:{deleteEvent:function(){var e=this;null!==this.eventToDelete&&(u.deleteEvent(this.db,{profile:this.profile,startDay:this.eventToDelete.start,endDay:this.eventToDelete.end}).then((function(){e.loadEvents()})),this.eventToDelete=null)},loadEvents:function(){var e=this;u.getEvents(this.db).then((function(t){var n={};t.forEach((function(e){n[e.startDay+e.endDay]={name:"",start:e.startDay,end:e.endDay}})),e.events=Object.values(n)}))},getEventColor:function(e){return e.color||this.defaultColor},handleEvent:function(e){var t=e.event;t.startDate=new Date(t.start),t.endDate=new Date(t.end),this.eventToDelete=t},handleDay:function(e){this.creatingEvent&&this.handleDate(e)},handleDate:function(e){var t=this;if(this.creatingEvent){if(this.newEvent.end=e.date,this.newEvent.start>this.newEvent.end){var n=[this.newEvent.end,this.newEvent.start];this.newEvent.start=n[0],this.newEvent.end=n[1]}var r={name:"",start:this.newEvent.start,end:this.newEvent.end};u.addEvent(this.db,{profile:this.profile,startDay:r.start,endDay:r.end}).then((function(){t.creatingEvent=!1,t.loadEvents()}))}else this.newEvent.start=e.date,this.newEvent.end=e.date,this.creatingEvent=!0},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()}}},F=$,H=(n("98f8"),n("8336")),K=n("a4f6"),J=n("b0af"),Y=n("99d9"),z=n("169a"),G=n("ce7e"),Q=n("2fa4"),U=Object(f["a"])(F,I,P,!1,null,"15fa6414",null),W=U.exports;h()(U,{VBtn:H["a"],VCalendar:K["a"],VCard:J["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:Y["c"],VDialog:z["a"],VDivider:G["a"],VIcon:w["a"],VSpacer:Q["a"]}),r["a"].use(T["a"]);var X=[{path:"/",name:"Home",component:W},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Z=new T["a"]({routes:X}),ee=Z,te=n("2f62");r["a"].use(te["a"]);var ne=new te["a"].Store({state:{},mutations:{},actions:{},modules:{}}),re=n("f309");r["a"].use(re["a"]);var ae=new re["a"]({theme:{themes:{light:{primary:"#fc766a",secondary:"#fdb1aa",accent:"#49a1af"}}}});r["a"].config.productionTip=!1,new r["a"]({router:ee,store:ne,vuetify:ae,render:function(e){return e(V)}}).$mount("#app")}});
//# sourceMappingURL=app.95ba8117.js.map